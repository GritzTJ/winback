<Application x:Class="WinBack.App.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:tb="http://www.hardcodet.net/taskbar"
             ShutdownMode="OnExplicitShutdown">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/Styles.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <!-- Icône de la barre système -->
            <tb:TaskbarIcon x:Key="TrayIcon"
                            IconSource="/Resources/Icons/winback_tray.ico"
                            ToolTipText="WinBack — Sauvegardes automatiques"
                            Visibility="Visible">

                <tb:TaskbarIcon.ContextMenu>
                    <ContextMenu FontFamily="Segoe UI Variable Text, Segoe UI" FontSize="13">
                        <MenuItem Header="Ouvrir WinBack" FontWeight="SemiBold"
                                  Click="TrayOpen_Click"/>
                        <Separator/>
                        <MenuItem Header="Historique" Click="TrayHistory_Click"/>
                        <MenuItem Header="Paramètres" Click="TraySettings_Click"/>
                        <Separator/>
                        <MenuItem Header="Quitter" Click="TrayExit_Click"/>
                    </ContextMenu>
                </tb:TaskbarIcon.ContextMenu>
            </tb:TaskbarIcon>
        </ResourceDictionary>
    </Application.Resources>
</Application>
